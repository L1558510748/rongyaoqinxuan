"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,t,o){return t&&_defineProperties(i.prototype,t),o&&_defineProperties(i,o),i}var Index=function(){function i(){_classCallCheck(this,i),this.box=$(".box"),this.top=$("#fixed_top"),this.quit=document.getElementById("quit"),this.imgs="",this.clientH=document.documentElement.clientHeight,this.addEvent()}return _createClass(i,[{key:"addEvent",value:function(){var i=this;$(".row1 figure").click(function(){console.log($(this))}),onscroll=function(){i.pagescroll(),lazyImg(i.imgs)};i=this;this.check(),this.quit.onclick=function(){i.exit()},this.init(),$(this.top).click(this.scrolltop),this.boxscroll(),this.list()}},{key:"exit",value:function(){sessionStorage.removeItem("user"),location.reload()}},{key:"check",value:function(){var i=sessionStorage.getItem("user");i&&(console.log(JSON.parse(i).sucMsg),$(".user_info").css("display","none"),$(".logined").css("display","block"),$("#username").html(JSON.parse(i).sucMsg))}},{key:"scrolltop",value:function(){$("html,body").animate({scrollTop:"0"},500)}},{key:"pagescroll",value:function(){200<$(document).scrollTop()?($(".floor_list").css("right","0px"),$("#fixed_top").css("visibility","visible"),$("#fixed_top").fadeIn(500)):($(".floor_list").css("right","-86px"),$("#fixed_top").fadeOut(500))}},{key:"boxscroll",value:function(){var i=0;setInterval(function(){i==$(".box>ul>li").length?(i=0,$(".box>ul").css("top",0)):($(".box>ul").animate({top:-36*i+"px"},500),i++)},3e3)}},{key:"list",value:function(){$(".list").children("li").click(function(){$(this).addClass("active").siblings().removeClass("active"),$("html").animate({scrollTop:$(".floor").eq($(this).index()).offset().top})})}},{key:"init",value:function(){var n=this,e=this;$.getJSON("http://localhost/rongyaoqinxuan/src/static/goods.json",function(i){for(var t="",o=0;o<8;o++)t+='<figure id="'.concat(i[o].goods_id,'"><img lazy=').concat(i[o].img,' class="lazy">\n                    <figcaption><p class="yc">').concat(i[o].name,'</p>\n                    <p><span id="nowprice">￥').concat(i[o].nowprice,'</span ><span id="beforeprice"><s>￥').concat(i[o].beforeprice,"</s></span></p></figcaption>\n                    </figure>");$(".row1").html(t),e.figclick()}),$.getJSON("http://localhost/rongyaoqinxuan/src/static/zhihui.json",function(i){for(var t="",o=0;o<8;o++)t+='<figure id="'.concat(i[o].goods_id,'"><img lazy=').concat(i[o].img,'  class="lazy">\n                <figcaption><p class="yc">').concat(i[o].name,'</p>\n                <p><span id="nowprice">￥').concat(i[o].nowprice,'</span ><span id="beforeprice"><s>￥').concat(i[o].beforeprice,"</s></span></p></figcaption>\n                </figure>");$(".row2").html(t),e.figclick()}),$.getJSON("http://localhost/rongyaoqinxuan/src/static/jingpin.json",function(i){for(var t="",o=0;o<8;o++)t+='<figure id="'.concat(i[o].goods_id,'"><img lazy=').concat(i[o].img,' class="lazy">\n                <figcaption><p class="yc">').concat(i[o].name,'</p>\n                <p><span id="nowprice">￥').concat(i[o].nowprice,'</span ><span id="beforeprice"><s>￥').concat(i[o].beforeprice,"</s></span></p></figcaption>\n                </figure>");$(".row3").html(t),n.imgs=document.querySelectorAll(".lazy"),console.log(n.imgs.length),n.arr=Array.from(n.imgs),lazyImg(n.imgs),e.figclick()})}},{key:"figclick",value:function(){$(".row1").children("figure").click(function(){var i=$(this).attr("id");console.log(i),$(window).attr("location","./html/productdetail.html?id="+i)}),$(".row2").children("figure").click(function(){var i=$(this).attr("id");console.log(i),$(window).attr("location","./html/productdetail.html?id="+i)}),$(".row3").children("figure").click(function(){var i=$(this).attr("id");console.log(i),$(window).attr("location","./html/productdetail.html?id="+i)})}}]),i}();new Index;