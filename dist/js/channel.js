"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function _createClass(i,t,n){return t&&_defineProperties(i.prototype,t),n&&_defineProperties(i,n),i}var Channel=function(){function i(){_classCallCheck(this,i),this.id=this.getUrlParam("id"),this.url="",this.imgs="",this.addEvent()}return _createClass(i,[{key:"addEvent",value:function(){var i=this;this.boxscroll(),this.init(),this.check(),this.id=this.getUrlParam("id"),onscroll=function(){lazyImg(i.imgs)}}},{key:"boxscroll",value:function(){var i=0;setInterval(function(){i==$(".box>ul>li").length?(i=0,$(".box>ul").css("top",0)):($(".box>ul").animate({top:-36*i+"px"},500),i++)},3e3)}},{key:"init",value:function(){var e=this;"qinxuan"==e.id&&(this.url="http://localhost/rongyaoqinxuan/src/static/goods.json",$("#title").html("亲选生态")),"zhihui"==e.id&&(this.url="http://localhost/rongyaoqinxuan/src/static/zhihui.json",$("#title").html("智慧屏系列")),"jingpin"==e.id&&(this.url="http://localhost/rongyaoqinxuan/src/static/jingpin.json",$("#title").html("精品推荐")),$.getJSON(this.url,function(i){console.log(i);for(var t="",n=0;n<i.length;n++)t+='<figure id="'.concat(i[n].goods_id,'"><img lazy=').concat(i[n].img,' class="lazy">\n                            <figcaption><p class="yc">').concat(i[n].name,'</p>\n                            <p><span id="nowprice">￥').concat(i[n].nowprice,'</span ><span id="beforeprice"><s>￥').concat(i[n].beforeprice,"</s></span></p></figcaption>\n                            </figure>");$(".el_row").html(t),e.imgs=document.querySelectorAll(".lazy"),console.log(e.imgs.length),lazyImg(e.imgs),e.figclick()})}},{key:"figclick",value:function(){$(".el_row").children("figure").click(function(){var i=$(this).attr("id");$(window).attr("location","./productdetail.html?id="+i)})}},{key:"check",value:function(){var i=sessionStorage.getItem("user");i&&($(".user_info").css("display","none"),$(".logined").css("display","block"),this.user=JSON.parse(i).sucMsg,$("#username").html(this.user))}},{key:"getUrlParam",value:function(i){var t=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);if(null!=n)return unescape(n[2])}}]),i}();new Channel;