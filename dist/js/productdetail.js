"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var c=t[e];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}var Detail=function(){function i(){_classCallCheck(this,i),this.id=this.getUrlParam("id"),this.reduce=$("#reduce"),this.increase=$("#increase"),this.num=1,this.index=0,this.data={},this.addEvent()}return _createClass(i,[{key:"addEvent",value:function(){var t=this;$(".bigpic").mouseover(function(){t.over()}),$(".bigpic").mousemove(function(i){t.move(i)}),$(".bigpic").mouseout(function(){t.out()});t=this;this.getdata(),$(this.reduce).click(function(){0<t.num&&$("#num").html(--t.num)}),$(this.increase).click(function(){$("#num").html(++t.num)})}},{key:"over",value:function(){$(".hoverpic").css("display","block"),$(".srollpic").css("display","block")}},{key:"move",value:function(i){console.log($(".hoverpic").width());var t=i.pageX-$(".bigpic").offset().left-$(".hoverpic").width()/2,e=i.pageY-$(".bigpic").offset().top-$(".hoverpic").height()/2;t<0&&(t=0),e<0&&(e=0),t>$(".bigpic").width()-$(".hoverpic").width()&&(t=$(".bigpic").width()-$(".hoverpic").width()),e>$(".bigpic").height()-$(".hoverpic").height()&&(e=$(".bigpic").height()-$(".hoverpic").height()),$(".hoverpic").css("left",t+"px"),$(".hoverpic").css("top",e+"px");var c=t/($(".bigpic").width()-$(".hoverpic").width()),o=e/($(".bigpic").height()-$(".hoverpic").height());$(".srollpic").find("img").css("left",$(".srollpic").width()-$(".srollpic").find("img").width()*c+"px"),$(".srollpic").css("top",$(".srollpic").height()-$(".srollpic").find("img").height()*o+"px")}},{key:"out",value:function(){$(".hoverpic").css("display","none"),$(".srollpic").css("display","none")}},{key:"getdata",value:function(){var e=this;$.getJSON("http://localhost/rongyaoqinxuan/src/static/goods.json",function(i){for(var t=0;t<i.length;t++)if(i[t].goods_id===e.id){e.index=t,console.log(t),e.data=i[t],e.init();break}}),$("#product_name").html()}},{key:"init",value:function(){console.log(this.data),$("#product_name").html(this.data.name),$(".goods_name").html(this.data.name),$("#price").html("ï¿¥"+this.data.nowprice),$(".bigpic").find("img").attr("src",this.data.img1),$("#sp1").attr("src",this.data.img1),$("#sp2").attr("src",this.data.img2),$("#sp3").attr("src",this.data.img3),$(".srollpic").find("img").attr("src",this.data.img1)}},{key:"getUrlParam",value:function(i){var t=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(t);return null!=e?unescape(e[2]):null}}]),i}();new Detail;