"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}var Detail=function(){function i(){_classCallCheck(this,i),this.id=this.getUrlParam("id"),this.reduce=$("#reduce"),this.increase=$("#increase"),this.num=1,this.index=0,this.data={},this.addEvent()}return _createClass(i,[{key:"addEvent",value:function(){this.check();var t=this;$(".bigpic").mouseover(function(){t.over()}),$(".bigpic").mousemove(function(i){t.move(i)}),$(".bigpic").mouseout(function(){t.out()});t=this;this.getdata(),$(this.reduce).click(function(){0<t.num&&$("#num").html(--t.num)}),$(this.increase).click(function(){$("#num").html(++t.num)}),$(".smallpic").find("img").click(function(){var i=$(this).attr("src");console.log($(this).addClass("active").siblings().removeClass("active")),$(".bigpic").find("img").attr("src",i),$(".scrollpic").find("img").attr("src",i)})}},{key:"check",value:function(){var i=sessionStorage.getItem("user");i&&(console.log(JSON.parse(i).sucMsg),$(".user_info").css("display","none"),$(".logined").css("display","block"),$("#username").text(JSON.parse(i).sucMsg))}},{key:"over",value:function(){$(".hoverpic").css("display","block"),$(".scrollpic").css("display","block")}},{key:"move",value:function(i){var t=i.pageX-$(".bigpic").offset().left-54,e=i.pageY-$(".bigpic").offset().top-54;t<0&&(t=0),e<0&&(e=0),t>$(".bigpic").width()-$(".hoverpic").width()&&(t=$(".bigpic").width()-$(".hoverpic").width()),e>$(".bigpic").height()-$(".hoverpic").height()&&(e=$(".bigpic").height()-$(".hoverpic").height()),$(".hoverpic").css("left",t+"px"),$(".hoverpic").css("top",e+"px");var s=t/($(".bigpic").width()-$(".hoverpic").width()),c=e/($(".bigpic").height()-$(".hoverpic").height());$("#sc1").css("left",($(".scrollpic").width()-$("#sc1").width())*s+"px"),$("#sc1").css("top",($(".scrollpic").height()-$("#sc1").height())*c+"px")}},{key:"out",value:function(){$(".hoverpic").css("display","none"),$(".scrollpic").css("display","none")}},{key:"getdata",value:function(){var e=this;$.getJSON("http://localhost/rongyaoqinxuan/src/static/goods.json",function(i){for(var t=0;t<i.length;t++)if(i[t].goods_id===e.id){e.index=t,console.log(t),e.data=i[t],e.init();break}}),$("#product_name").html()}},{key:"init",value:function(){console.log(this.data),$("#product_name").html(this.data.name),$(".goods_name").html(this.data.name),$("#price").html("ï¿¥"+this.data.nowprice),$("#bp1").attr("src",this.data.img1),$("#sp1").attr("src",this.data.img1),$("#sp2").attr("src",this.data.img2),$("#sp3").attr("src",this.data.img3),$("#sc1").attr("src",this.data.img1)}},{key:"getUrlParam",value:function(i){var t=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(t);return null!=e?unescape(e[2]):null}}]),i}();new Detail;