"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var Login=function(){function e(){_classCallCheck(this,e),this.box=$(".box"),this.addEvent(),this.user=$("#user"),this.pw=$("pw"),this.reuser=$("reuser"),this.repw=$("repw"),this.loginbtn=$("#loginbtn"),this.registerbtn=$("#registerbtn"),this.url="http://localhost/rongyaoqinxuan/src/static/php/login.php"}return _createClass(e,[{key:"addEvent",value:function(){this.box.find("li").click(this.tab),$("#loginbtn").click(this.login),$("#registerbtn").click(this.register)}},{key:"tab",value:function(){$(this).addClass("active").siblings().removeClass("active"),$(".content").children("div").css("display","none").eq($(this).index()).css("display","block")}},{key:"login",value:function(){var e=/^[A-Za-z0-9]{6,10}$/;e.test($(user).val())||alert("账号格式错误"+$(user).val());var t=/^[A-Za-z0-9\.]{6,10}$/;t.test($(pw).val())||alert("密码格式错误"),t.test($(pw).val())&&e.test($(user).val())&&$.ajax({type:"post",url:"http://localhost/rongyaoqinxuan/src/static/php/login.php",data:{user:$(user).val(),pw:$(pw).val()},success:function(e){1==(e=JSON.parse(e)).code?(sessionStorage.setItem("user",JSON.stringify(e)),location.href="./../index.html"):2==e.code?alert("密码错误"):alert("账号不存在")}})}},{key:"register",value:function(){if(/^[A-Za-z0-9]{6,10}$/.test($(reuser).val())){/^[A-Za-z0-9\.]{6,10}$/.test($(repw).val())||alert("密码格式错误"),$.ajax({type:"post",url:"http://localhost/rongyaoqinxuan/src/static/php/register.php",data:{user:$(reuser).val(),pw:$(repw).val()},success:function(e){1==(e=JSON.parse(e)).code?(alert("注册成功"),location.href="./../index.html"):alert("注册失败。用户名已存在")}})}else alert("账号格式错误"+$(user).val())}}]),e}();new Login;